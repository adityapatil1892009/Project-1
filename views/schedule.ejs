<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %>
<body>
    <%- include('partials/header') %>
    <%- include('partials/navbar') %>

    <main class="container" style="padding: 40px 20px; max-width: 1400px; margin: 0 auto;">
        <div style="margin-bottom: 30px;">
            <h1 style="color: #1a202c; margin: 0 0 8px 0; font-size: 28px; font-weight: 600;">Water Supply Schedules</h1>
            <p style="color: #718096; font-size: 14px; margin: 0;">View water supply timings for different areas of Pune</p>
        </div>
        
        <div style="margin-bottom: 30px;">
            <div style="position: relative; max-width: 400px;">
                <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #a0aec0; font-size: 16px;">üîç</span>
                <input type="text" id="searchInput" placeholder="Search by area or zone..." style="width: 100%; padding: 10px 15px 10px 40px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
            </div>
        </div>

        <div class="schedule-container" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(270px, 1fr)); gap: 16px;">
            <% if (schedule) { %>
                <% Object.entries(schedule).forEach(([area, details]) => { 
                    const status = details.status || 'Active';
                    const timing = details.timing || '';
                    const duration = details.duration || '';
                    const zone = details.zone || '';
                    let statusColor = '#059669';
                    let statusBg = '#d1fae5';
                    if (status === 'Interrupted') {
                        statusColor = '#dc2626';
                        statusBg = '#fee2e2';
                    } else if (status === 'Scheduled') {
                        statusColor = '#2563eb';
                        statusBg = '#dbeafe';
                    }
                %>
                    <div style="background: white; border-radius: 8px; padding: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #3b82f6;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                            <div>
                                <h3 style="color: #1a202c; margin: 0 0 4px 0; font-size: 15px; font-weight: 600;"><%= area %></h3>
                                <p style="color: #718096; margin: 0; font-size: 12px;"><%= zone %></p>
                            </div>
                            <span style="background-color: <%= statusBg %>; color: <%= statusColor %>; padding: 4px 10px; border-radius: 12px; font-size: 10px; font-weight: 600; white-space: nowrap; margin-left: 8px;">
                                <%= status %>
                            </span>
                        </div>
                        
                        <div style="display: flex; align-items: flex-start; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid #f0f0f0;">
                            <span style="color: #3b82f6; margin-right: 10px; font-size: 16px; min-width: 18px;">üïê</span>
                            <div style="flex: 1;">
                                <p style="margin: 0; font-size: 11px; color: #a0aec0; font-weight: 500;">Timing</p>
                                <p style="margin: 0; font-size: 13px; font-weight: 600; color: #1a202c;"><%= timing %></p>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: flex-start;">
                            <span style="color: #3b82f6; margin-right: 10px; font-size: 16px; min-width: 18px;">üìã</span>
                            <div style="flex: 1;">
                                <p style="margin: 0; font-size: 11px; color: #a0aec0; font-weight: 500;">Duration</p>
                                <p style="margin: 0; font-size: 13px; font-weight: 600; color: #1a202c;"><%= duration %></p>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <div style="grid-column: 1 / -1; padding: 40px; text-align: center; color: #a0aec0;">
                    <p>No schedule information available.</p>
                </div>
            <% } %>
        </div>
    </main>

    <%- include('partials/footer') %>
    
    <script>
        document.getElementById('searchInput').addEventListener('keyup', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('.schedule-container > div');
            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                card.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        });
    </script>
</body>
</html>